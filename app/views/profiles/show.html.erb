<div data-controller="profileInfo">
  <article>
    <section class="container p-4 pt-10 mx-auto">
      <div class="justify-center p-6 bg-white rounded-lg shadow-md md:flex">
        <picture class="flex flex-col items-center justify-center md:w-1/4">
          <% if @profile.avatar.attached? %>
            <%= image_tag @profile.avatar.variant(:thumb), class: "mx-auto" %>
          <% else %>
            <div class="flex flex-col items-center justify-center">
              <%= image_tag("defaultuser.png", class: "rounded-full w-32 h-32 mx-auto") %>
            </div>
          <% end %>
          <span class="mb-auto">
            <%= link_to "應徵紀錄", apply_job_path(id: current_user), class: "my-5 inline-block px-5 py-3 text-white rounded-lg cursor-pointer bg-amber-500 hover:bg-amber-800" %>
          </span>
        </picture>
        <div class="mt-4 md:w-3/4 md:mt-0 md:pl-4">
          <h1 class="text-2xl font-semibold" data-profileInfo-target="fullName"><%= @profile.full_name %></h1>
          <p class="text-gray-600" data-profileInfo-target="jobTitle"><%= @profile.job_title %></p>
          <div class="mt-4">
            <h2 class="text-lg font-semibold">聯絡資訊</h2>
            <ul class="mt-2 text-gray-700">
              <li>
                <%= image_tag 'email.svg', class: "w-6 h-6 rounded-l-lg p-0.5 inline-block mb-1" %>
                <span data-profileInfo-target="email"><%= current_user.email %></span>
              </li>
              <li>
                <%= image_tag 'phone.svg', class: "w-6 h-6 rounded-l-lg p-0.5 inline-block mb-1" %>
                <span data-profileInfo-target="phone"><%= @profile.phone %></span>
              </li>
              <li>
                <%= image_tag 'address.svg', class: "w-6 h-6 rounded-l-lg p-0.5 inline-block mb-1" %>
                <span data-profileInfo-target="address"><%= @profile.address %></span>
              </li>
            </ul>
          </div>
          <div class="mt-4">
            <span class="text-lg font-semibold">關於我</span>
            <p class="text-gray-700" data-profileInfo-target="aboutMe">
              <%= @profile.about_me %>
            </p>
          </div>
          <div class="mt-4">
            <h2 class="text-lg font-semibold">學歷</h2>
            <ul class="mt-2 text-gray-700">
              <li data-profileInfo-target="education"><%= @profile.education %></li>
            </ul>
          </div>
          <div class="mt-4">
            <h2 class="text-lg font-semibold">語言</h2>
            <ul data-profileInfo-target="languages" class="mt-2 text-gray-700">
              <% @profile.languages.each do |language, level| %>
                <li><%= "#{language} • #{level}" %></li>
              <% end %>
            </ul>
          </div>
          <div class="mt-4">
            <h2 class="text-lg font-semibold">技能</h2>
            <ul data-profileInfo-target="skills" class="mt-2 text-gray-700">
              <% @profile.skills.each do |skill| %>
                <li class="inline-block bg-amber-100 text-amber-600 rounded p-0.5 mb-1"><%= skill.tag %></li>
              <% end %>
            </ul>
          </div>
          <div class="mt-4">
            <h2 class="text-lg font-semibold">工作經驗</h2>
            <div data-profileInfo-target="workExperience" class="mt-2 text-gray-700">
              <p><%= @profile.work_experience %></p>
            </div>
          </div>
          <div class="mt-4">
            <h2 class="text-lg font-semibold">社群媒體</h2>
            <div class="grid gap-3 mt-2 lg:grid-cols-2">
              <div class="flex items-center">
                <div>
                  <%= image_tag 'linkedin.svg', class: 'mr-2' %>
                </div>
                <p data-profileInfo-target="linkedin" class="overflow-auto" title="<%= @profile&.linkedin %>"><%= @profile&.linkedin %></p>
              </div>
              <div class="flex items-center">
                <div>
                  <%= image_tag 'facebook.svg', class: 'mr-2' %>
                </div>
                <p data-profileInfo-target="facebook" class="overflow-auto" title="<%= @profile&.facebook %>"><%= @profile&.facebook %></p>
              </div>
              <div class="flex items-center">
                <div>
                  <%= image_tag 'github.svg', class: 'mr-2' %>
                </div>
                <p data-profileInfo-target="github" class="overflow-auto" title="<%= @profile&.github %>"><%= @profile&.github %></p>
              </div>
              <div class="flex items-center">
                <div>
                  <%= image_tag 'web.png', class: 'w-8 px-1' %>
                </div>
                <p data-profileInfo-target="website" class="overflow-auto" title="<%= @profile&.website %>"><%= @profile&.website %></p>
              </div>
            </div>
          </div>
        </div>
        <span class="block mt-5">
          <%= link_to edit_profile_path do %>
            <%= editor_icon %>
          <% end %>
        </span>
      </div>
      <div class="mt-4">
        <section class="p-6 mt-6 bg-white rounded-lg shadow-md">
          <h2 class="mb-2 text-xl font-semibold">近期履歷</h2>
          <div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
            <div class="flex items-center justify-center p-5 border border-gray-300 rounded-e bg-amber-50">
              <%= link_to edit_resume_path(account: current_user.account, id: @resume.id) do %>
                <%= editor_icon %>
              <% end %>
            </div>
            <div class="flex items-center justify-center p-5 border border-gray-300 rounded-md bg-amber-50">
              <%= link_to profile_path do %>
                <%= image_tag 'lock.svg', class: "w-8 h-8 rounded-lg bg-gray-200 hover:bg-gray-400 font-lg cursor-pointer p-1.5" %>
              <% end %>
            </div>
            <div class="flex items-center justify-center p-5 border border-gray-300 rounded-md bg-amber-50">
              <%= link_to profile_path do %>
                <%= image_tag 'lock.svg', class: "w-8 h-8 rounded-lg bg-gray-200 hover:bg-gray-400 font-lg cursor-pointer p-1.5" %>
              <% end %>
            </div>
          </div>
        </section>
      </div>
    </section>
  </article>
</div>
